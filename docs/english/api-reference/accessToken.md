
# Access Token

To utilize the APIs exposed in the Accounts, Cards, Customer and Transaction modules the use of an Access Token is needed.

In practical terms, the Access Token is a sequence of characters that acts as a digital key, allowing a given application to access the specific resources and data of our APIs securely. It ensures that only authenticated and authorized customers can interact with the services provided.

![1](https://github.com/user-attachments/assets/5e0e7d2a-7a2c-4410-b17b-1f3b924eeff8)

This page will document how to request an access token using the client's credentials following an OAuth (Open Authorization) standard policy, which allows the user to access resources without sharing their credentials.

## Request

### Endpoint

**Method:** Post

**URL:** `https://{{endpoint}}/token`

### Authentication

The authorization type for this call is **“Basic auth”**. It uses the API key as the username and the client secret as the password.

![2](https://github.com/user-attachments/assets/022ffb9d-872e-434f-a851-2e94ecb13078)

When setting up this authorization type in Postman, it will automatically generate the Authorization Header, encoding the username and password in Base64, adding the "Basic" (with the space to the right).

![3](https://github.com/user-attachments/assets/5a3d5ed5-0218-4360-88cc-be857919d720)

**Note:** The credentials (Api key -username- and client secret -password-) must be requested by the client to the PM so that he can request them from the API team.

### Headers

**Content-Type:** application/x-www-form-urlencoded

**apikey:** The same Apikey used as the username mentioned in the authorization section.

**Authorization:** Automatically generated by Postman with the previous "authorization type".

![4](https://github.com/user-attachments/assets/ec573822-5aeb-44e1-9788-db0a6cba4b85)

### Sample Request
```bash
curl --location 'https://{{endpoint}}/{{product}}/token' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--header 'apikey: rfDarhUD3omwZf1hwQphgegrd0Yodx9y' \
--header 'Authorization: Basic c3FIOG9vSGV4VHoAyg5T1JvNnJoZ3ExaVNyQWw6WjRsanRKZG5lQk9qUE1BVQ' \
--data-urlencode 'grant_type=client_credentials'
```

***Disclaimer:** All values in the sample request are fictional and for instructional purposes only.*

## Response

![5](https://github.com/user-attachments/assets/97977392-3fb1-4234-985f-6ed7b13b4dd4)

The **`token_type`** is configured for the Bearer Token authorization type. The access token required for any requests sent to the APIs exposed in the Accounts, Cards, Customers, and Transactions modules will be in the **`access_token`** field of the response.

Therefore, if you are using Postman, it is necessary to configure the Bearer Token in the request authorization tab. 

![6](https://github.com/user-attachments/assets/dcfb9bb5-ca47-48fa-b08a-fa5137662425)

Otherwise, just manually add an Authorization Header to each request with the content "Bearer [ACCESS_TOKEN]", in which the [ACCESS_TOKEN] will correspond to what was generated in the response from the **access_token** variable:

```bash
--header 'Authorization: Bearer [ACCESS_TOKEN]' 
```

Additionally, the **`expires_in`** field will display the duration of the access token in seconds.

![7](https://github.com/user-attachments/assets/ce1f895e-4aa8-493c-8e0d-1636803e8888)

Currently the value of the **`expires_in`** field is 900 seconds. However, we recommend using the value contained in the variable directly (**`expires_in`**) returned in the response body, as in image  above. This way, if there is a change in the token's expiration time, the client application will not need maintenance.


```pseudocode
IF (current_dateTime() > InicialDateTime() + expires_in) {
    statements
}
END IF
```

### Sample Response
```json
{   
    "token_type": "BearerToken",
    "issued_at": "1420260525643",
    "client_id": "5jUAdGv9pBouF0wOH5keAVI35GBtx3dT",
    "access_token": "XkhU2DFnMGIVL2hvsRHLM00hRWav",
    "expires_in": "1799", //--in seconds
    "status": "approved"
}
```

***Disclaimer:** All values in the sample request are fictional and for instructional purposes only.*

---

## See Also

- [API Glossary](?path=docs/english/api-reference/api-glossary.md)
- [API Request](?path=docs/english/api-reference/api-request.md)
- [Error Handling](?path=docs/english/api-reference/response-handling.md)
- [Message Level Encryption](?path=docs/english/api-reference/encryption.md)
- [Webhook](?path=docs/english/api-reference/5-notifications.md)

---
